---

import BlogRoll from '@components/blogpost/BlogRoll.svelte';
import Card from '@components/blogpost/Card.svelte';
import { getCollection } from 'astro:content';
import Layout from "@layouts/default/Layout.astro";

import { getEntry } from 'astro:content';

const intro = await getEntry('docs', 'intro');
const { Content } = await intro.render();

const posts = (await getCollection('posts'))
	.sort(
		({ data: { datePublished: datePublishedA } }, { data: { datePublished: datePublishedB } }) =>
			new Date(datePublishedB).valueOf() - new Date(datePublishedA).valueOf(),
	)
	.map(({ data: { datePublished, postTitle, seoMetaDescription }, slug }) => ({
		datePublished,
		postTitle,
		seoMetaDescription,
		slug,
	}));

const seoProps = {
	metadescription:
		'Astro Blog Markdown Starter - starter code by Rodney Lab to help you get going on your next blog site',
	slug: '',
	title: 'Home',
};

---

<Layout {...seoProps}>
	<main>
    <header>
      <h1>Climate &mdash; Astro Starter</h1>
      <h2>Astro Svelte Markdown Blog</h2>
    </header><Card>
      <h2 class="heading">About me</h2>
      <p>
        I live and breathe analogue photography. I show you my favourite analogue film cameras on this
        site. Hopefully if you are not into analogue photography yet, some of my enthusiasm will rub
        off onto you.
      </p>
    </Card>
    <BlogRoll client:visible initialPosts={4} posts={posts} />
	</main>
</Layout>